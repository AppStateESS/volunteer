sudo: false
matrix:
  include:
    - language: php
      php:
        - 7
      script:
        - '.travis-build/phplint .'
    - language: node.js
      node_js: 10.20.1
before_install:
  - npm i -g npm@v6.14.8
install:
  - npm install
after_success:
  - npm run build
  - rm -rf node_modules
  - tar -czf volunteer.tar.gz *
deploy:
  provider: releases
  skip_cleanup: true
  api_key:
    secure: uTNUHiRw2+qZYmD7dxSEuOCjH6rX+pBGmQdUZWaPcp24DgIfTXH/HGPalQieDMYZzYy/DhymiWOqUhlOZ6aEauG3EYcMW0RsfKNYaEJrEZWAI8+G9q7OixIYKGmNwyHFvni1+spPxl1waGaoQ3UF2vL/11TIBwGxTUmZ8ucpK2yxTIbP3fLBwdiUxyV8uYpfHcOc6q6vjm5pDT/8cZ2vP8IXwBnRirefk15Kf8Y+bgaYMkafWzc3lgVgAYYVKkYFYVOdbEJdtFfyOR26Z7kuySTw2W4bPKf4ypR5w/BTGh/eTRdiWX4LOqYKpvRXI0+MSFSzT+h7M0kCZi1tYjjngZPOI/kpth2zCWoMMIGKojmhr2bjy/ObAKJDC1XQ0JVwEOqJCptU+ubK+HddAwrgBd2FdHFn6aDPI5nfJMJY7gLa0oZ7ua75qfTxfXeOBaiVfBzM0bZyiyqZAIj+H3wTA7onhpH1EOXxZNBEqhGLZ1eZrN99+MKqksyHo9RzBRKL8dKF8S7xL54JnsWf2aj05wfUq9Q1H1ZQU+tovFSPQfotOzfuZcLGVPOaQyfMX7EYwlKoyldm5lyCbXeAnUnjFNVLoiodMIb1BuNX2L6cBY3l/Vl3df+lHp1/bjX4Ai30tyLZeABHXashQeOk+PqYcOrbyTEnnt7z/aqzeCqlaYU=
  file: volunteer.tar.gz
  overwrite: true
  on:
    repo: AppStateESS/volunteer
    branch: master
    tags: true
